<div>
    <div style="padding:0px 15px;cursor:pointer;float:left;" id="animation-left-nav"><a class="layui-icon layui-icon-spread-left" style="color:#1E9FFF;"></a></div>
    <span class="layui-breadcrumb" id="breadcrumb">
    </span>
</div>


<script>
    // 填充breadcrumb数据
    //获取当前路由
    var routes_str = window.localStorage.getItem("userroutes");
    if (routes_str != null) {
        routes = JSON.parse(routes_str);
        //获取当前模块id
        var current_moduleId = window.localStorage.getItem("current_moduleId");
        let side = document.getElementById("side");

        let c_routes = routes[0];
        for (let i = 0; i < routes.length; i++) {
            if (routes[i].moduleId === current_moduleId) {
                //generateMenu(side, [routes[i]], 1);
                c_routes = routes[i];
                break;
            }
        }
        let curl = GetUrlRelativePath();
        for (let i = 0; i < c_routes.controllers.length; i++) {

            let controller = c_routes.controllers[i];
            if (controller.methods.length <= 1) {
                if (controller.methods[0].completePath == curl) {
                    document.getElementById("breadcrumb").innerHTML = "<a href='#'>"
                        + c_routes.moduleName + "</a>" + "<a href='" + controller.methods[0].completePath
                        + "'>" + controller.controllerAlias + "</a>";
                    break;
                }

            }
            else {
                for (let j = 0; j < controller.methods.length; j++) {
                    let method = controller.methods[j];
                    if (method.completePath == curl) {
                        document.getElementById("breadcrumb").innerHTML = "<a href='#'>"
                            + c_routes.moduleName + "</a>" + "<a href='" + controller.methods[0].completePath + "'>" + controller.controllerAlias + "</a>" + "<a href='#'>" + method.methodAlias + "</a>";
                        break;
                    }
                }
            }
           
        }

    }
    //获取当前url
    function GetUrlRelativePath() {
        var url = document.location.toString();
        var arrUrl = url.split("//");

        var start = arrUrl[1].indexOf("/");
        var relUrl = arrUrl[1].substring(start);//stop省略，截取从start开始到结尾的所有字符

        if (relUrl.indexOf("?") != -1) {
            relUrl = relUrl.split("?")[0];
        }
        return relUrl;
    }

    let current_nav_status = true;//展开
    $('#animation-left-nav').click(function () {
        //这里定义一个全局变量来方便判断动画收缩的效果,也就是放在最外面
        if (current_nav_status) {//收缩
            $(".layui-side").animate({ width: 'toggle' });
            $(".layui-body").animate({ left: '0px' });
            $(".layui-footer").animate({ left: '0px' });

        } else {//展开
            $(".layui-side").animate({ width: 'toggle' });
            $(".layui-body").animate({ left: '200px' });
            $(".layui-footer").animate({ left: '200px' });
            //i--;
        }
        current_nav_status = !current_nav_status;
    });
    //左侧导航栏收缩提示
    $('#animation-left-nav').hover(function () {
        let tips = current_nav_status ? "收缩菜单" : "展开菜单"
        layer.tips(tips, '#animation-left-nav', { tips: [4, '#5FB878'], time: 0 });
    }, function () {
        layer.closeAll('tips');
    });
</script>